import{u as e}from"./index-CxgfQBo3.js";import{b as a,m as l,f as i,k as s,g as n,h as m,e as o,i as t,a1 as u,j as d,V as r,W as f,X as g,Y as p,v as c,p as y,aC as I,aD as _,a2 as b,t as v,ay as h}from"./vendor-DLaggKmm.js";import{f as k,a as K,c as C}from"./formatDate-DJT1dS-E.js";const w={class:"modal-image-container"},V={class:"anticon anticon-left"},j={class:"anticon anticon-right"},x={__name:"ImageInfoModal",props:{modelValue:{type:Boolean,required:!0},imageInfo:{type:Object,required:!0},imageKey:{type:Number,default:0},images:{type:Array,default:()=>[]}},emits:["update:modelValue","update:imageInfo","update:imageKey"],setup(x,{emit:A}){const D=a(),$=x,q=A,z=e(),M=e=>{q("update:modelValue",e)},P=()=>{q("update:modelValue",!1)},U=()=>{$.imageKey>0&&(q("update:imageInfo",$.images[$.imageKey-1]),q("update:imageKey",$.imageKey-1))},B=()=>{$.imageKey<$.images.length-1&&(q("update:imageInfo",$.images[$.imageKey+1]),q("update:imageKey",$.imageKey+1))},E=(e,a)=>{("user"!==a||e.user)&&("album"!==a||e.album)&&D.push("user"===a?`/user/${e.user._id}`:`/user/${e.user._id}/album/${e.album._id}`)};return(e,a)=>{const A=u,D=p,$=g,q=f,H=r,N=b,O=h;return i(),l(O,{open:x.modelValue,"onUpdate:open":M,class:v(["gallery-modal",{isUser:d(z).token}]),maskClosable:!1,title:x.imageInfo.name,width:550},{footer:s((()=>[m(N,{type:"primary",onClick:a[2]||(a[2]=e=>d(C)(e,x.imageInfo,d(z)))},{default:s((()=>a[3]||(a[3]=[y("复制链接")]))),_:1,__:[3]}),m(N,{type:"primary",onClick:P},{default:s((()=>a[4]||(a[4]=[y(" 关闭弹窗 "),n("span",{class:"esc"},"(Esc)",-1)]))),_:1,__:[4]})])),default:s((()=>[n("div",w,[m(A,{class:"modal-image",placeholder:"",src:"local"===x.imageInfo.type?d(z).config.site.url+x.imageInfo.url:x.imageInfo.url,preview:!1},null,8,["src"])]),m(H,{class:"modal-collapse"},{default:s((()=>[d(z).token?(i(),l(q,{key:0,header:"查看图片信息"},{default:s((()=>[m($,{bordered:"",column:1,size:"middle"},{default:s((()=>{var e,o,u,r,f;return[m(D,{label:"上传用户"},{default:s((()=>{var e,l;return[n("span",{class:"username",onClick:a[0]||(a[0]=e=>E(x.imageInfo,"user"))},c((null==(l=null==(e=x.imageInfo)?void 0:e.user)?void 0:l.username)||"游客"),1)]})),_:1}),m(D,{label:"所属相册"},{default:s((()=>{var e,l;return[n("span",{class:"username",onClick:a[1]||(a[1]=e=>E(x.imageInfo,"album"))},c((null==(l=null==(e=x.imageInfo)?void 0:e.album)?void 0:l.name)||"独立图片"),1)]})),_:1}),m(D,{label:"图片名称"},{default:s((()=>[y(c(x.imageInfo.filename),1)])),_:1}),m(D,{label:"原始名称"},{default:s((()=>[y(c(x.imageInfo.name),1)])),_:1}),m(D,{label:"图片大小"},{default:s((()=>[y(c(d(k)(x.imageInfo.size)),1)])),_:1}),m(D,{label:"物理路径"},{default:s((()=>[y(c(x.imageInfo.filePath),1)])),_:1}),m(D,{label:"图片类型"},{default:s((()=>[y("image/"+c(x.imageInfo.filename.split(".").pop()),1)])),_:1}),m(D,{label:"MD5"},{default:s((()=>[y(c(x.imageInfo.md5),1)])),_:1}),m(D,{label:"SHA1"},{default:s((()=>[y(c(x.imageInfo.sha1),1)])),_:1}),m(D,{label:"尺寸"},{default:s((()=>[y(c(x.imageInfo.width)+" x "+c(x.imageInfo.height),1)])),_:1}),(null==(e=d(z))?void 0:e.user)&&((null==(u=null==(o=d(z))?void 0:o.user)?void 0:u.username)===(null==(r=x.imageInfo.user)?void 0:r.username)||(null==(f=d(z).user)?void 0:f.founder))?(i(),l(D,{key:0,label:"上传IP"},{default:s((()=>[y(c(x.imageInfo.ip)+" (仅自己与管理员可见) ",1)])),_:1})):t("",!0),m(D,{label:"上传时间"},{default:s((()=>[y(c(d(K)(x.imageInfo.updatedAt)),1)])),_:1})]})),_:1})])),_:1})):t("",!0)])),_:1}),x.imageKey>0?(i(),o("div",{key:0,class:"ant-image-preview-switch-left",onClick:U},[n("span",V,[m(d(I))])])):t("",!0),x.images.length>1&&x.images.length>x.imageKey+1?(i(),o("div",{key:1,class:"ant-image-preview-switch-right",onClick:B},[n("span",j,[m(d(_))])])):t("",!0)])),_:1},8,["open","class","title"])}}};export{x as _};
